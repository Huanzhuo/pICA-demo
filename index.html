<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pICA Demo</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
</head>

<body class="hold-transition layout-top-nav">
  <div class="wrapper">
    <!-- Navbar -->
    <!-- <nav class="navbar navbar-expand-xl navbar-light navbar-white">
      <div class="container">
        <a class="navbar-brand">
          <img src="logo.jpeg" class="" style="opacity: .8; width: auto;height: 40pt;">
          <span class="brand-text font-weight-light"></span>
        </a>
        <div class="col-sm-1">
          <button type="button" class="btn btn-block btn-outline-secondary float-sm-right" id='btn-start'>Run</button>
        </div>
      </div>
    </nav> -->


    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <section class="content-header" style="background-color: white;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-sm-1">
              <img src="logo.jpeg" class="" style="opacity: .8; width: auto;height: 40pt;">
              <span class="brand-text font-weight-light"></span>
            </div>
            <div class="col-md-7">
            </div>
            <div class="col-sm-1">
              <button type="button" class="btn btn-block btn-outline-secondary float-sm-right" id='btn-reload'>Reload</button>
            </div>
            <div class="col-sm-1">
              <button type="button" class="btn btn-block btn-secondary float-sm-right" id='btn-start'>Run</button>
            </div>
            <div class="col-md-1">
            </div>
          </div>
        </div>
      </section>
      <br>

      <!-- Main content -->
      <section class="content">
        <div class="container-fluid">
          <!-- /.row -->

          <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
              <!-- Line chart -->
              <div class="card card-primary" id='title_pica'>
                <!-- Card -->
                <div class="card-header" style="background-color:#0077BB">
                  <label style="margin-bottom: -15pt;margin-top: -15pt;font-size:x-large;">In-Network Computing
                    (pICA)</label>
                  <br>
                  <label id='info_pica' style="margin-bottom: -15pt;font-size: large;">Accuracy: 0% &nbsp; / &nbsp;
                    Service Latency: 0s</label>
                </div>
                <h3 class="card-title" style="margin-left: 15pt;margin-top: 10pt;">
                  <i class="far fa-chart-bar"></i>
                  Separation Accuracy ( % ) &nbsp; / &nbsp; Time ( s )
                </h3>
                <div class="card-body">
                  <div class="flot-chart" id="sdr_pica" style="height: 200px;"></div>
                </div>
                <!-- Card -->
                <h3 class="card-title" style="margin-left: 15pt;margin-top: 5pt;">
                  <i class="far fa-chart-bar"></i>
                  Network Topology
                </h3>
                <div class="card-body">
                  <div id="topology_pica"
                    style="height: 4.5vw; background-image: url('topo_s7.svg'); background-size:100%;"></div>
                  <h3 class="card-title"><i class="fas fa-stop" style="color: rgb(78, 158, 78);"></i>&nbsp;Transmission Active</h3>
                  <h3 class="card-title" style="visibility: hidden;">####</h3>
                  <h3 class="card-title"><i class="fas fa-stop" style="color: rgb(214, 76, 76);"></i>&nbsp;Computing Active</h3>
                </div>
                <!-- Card -->
                <h3 class="card-title" style="margin-left: 15pt;margin-top:5pt;">
                  <i class="far fa-chart-bar"></i>
                  Computing Time ( s ) &nbsp; / &nbsp; Network Node
                </h3>
                <div class="card-body">
                  <div id="tc_pica" style="height: 120px;"></div>
                </div>

                <div class="info-box-content" style="margin-left: 15pt;margin-right: 15pt;margin-top: 5pt;">
                  <div class="progress">
                    <div id="progress_pica" class="progress-bar" style="background-color:#0077BB;width: 0%;"></div>
                  </div>
                  <span id="progressinfo_pica" class="progress-description">
                    0% of the data was transferred
                  </span>
                </div>

              </div>
              <!-- /.card -->

            </div>
            <!-- /.col -->
            <div class="col-md-5">
              <!-- Line chart -->
              <div class="card card-purple" id='title_fastica'>
                <!-- Card -->
                <div class="card-header" style="background-color:#CCBB44">
                  <label style="margin-bottom: -15pt;margin-top: -15pt;font-size:x-large;">Centralized
                    (FastICA)</label>
                  <br>
                  <label id='info_fastica' style="margin-bottom: -15pt;font-size: large;">Accuracy: 0% &nbsp; / &nbsp;
                    Service Latency: 0s</label>
                </div>
                <h3 class="card-title" style="margin-left: 15pt;margin-top: 10pt;">
                  <i class="far fa-chart-bar"></i>
                  Separation Accuracy ( % ) &nbsp; / &nbsp; Time ( s )
                </h3>
                <div class="card-body">
                  <div class="flot-chart" id="sdr_fastica" style="height: 200px;"></div>
                </div>
                <!-- Card -->
                <h3 class="card-title" style="margin-left: 15pt;margin-top: 5pt;">
                  <i class="far fa-chart-bar"></i>
                  Network Topology
                </h3>
                <div class="card-body">
                  <div id="topology_fastica"
                    style="height: 4.5vw; background-image: url('topo_s7.svg'); background-size:100%;"></div>
                  <h3 class="card-title"><i class="fas fa-stop" style="color: rgb(78, 158, 78);"></i>&nbsp;Transmission Active</h3>
                  <h3 class="card-title" style="visibility: hidden;">####</h3>
                  <h3 class="card-title"><i class="fas fa-stop" style="color: rgb(214, 76, 76);"></i>&nbsp;Computing Active</h3>
                </div>
                <!-- Card -->
                <h3 class="card-title" style="margin-left: 15pt;margin-top: 5pt;">
                  <i class="far fa-chart-bar"></i>
                  Computing Time ( s ) &nbsp; / &nbsp; Network Node
                </h3>
                <div class="card-body">
                  <div id="tc_fastica" style="height: 120px;"></div>
                </div>

                <div class="info-box-content" style="margin-left: 15pt;margin-right: 15pt;margin-top: 5pt;">
                  <div class="progress">
                    <div id="progress_fastica" class="progress-bar" style="background-color:#CCBB44;width: 0%;"></div>
                  </div>
                  <span id="progressinfo_fastica" class="progress-description">
                    0% of the data was transferred
                  </span>
                </div>

              </div>
              <!-- /.card -->

            </div>
            <!-- /.col -->
            <div class="col-md-1">
            </div>
          </div>
          <!-- /.row -->
        </div><!-- /.container-fluid -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <div class="row">
      <div style="margin:0 auto;">
        <strong>Copyright &copy; 2021 <a href="https://tu-dresden.de/">TU Dresden</a>.</strong> All rights reserved.
      </div>
    </div>

  </div>
  <!-- ./wrapper -->

  <!-- jQuery -->
  <script src="plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap 4 -->
  <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
  <script src="dist/js/adminlte.min.js"></script>
  <!-- FLOT CHARTS -->
  <script src="plugins/flot/jquery.flot.js"></script>
  <!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
  <script src="plugins/flot/plugins/jquery.flot.resize.js"></script>
  <!-- FLOT PIE PLUGIN - also used to draw donut charts -->
  <script src="plugins/flot/plugins/jquery.flot.pie.js"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="dist/js/demo.js"></script>
  <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"> </script> -->
  <script src="plugins/raphael/raphael.min.js"></script>
  <script>

    $(function () {
      //Initialize tooltip on hover
      $('<div class="tooltip-inner" id="line-chart-tooltip"></div>').css({
        position: 'absolute',
        display: 'none',
        opacity: 0.8
      }).appendTo('body');
      $('#sdr_fastica').bind('plothover', function (event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(2),
            y = item.datapoint[1].toFixed(2)

          $('#line-chart-tooltip').html('SDR = ' + y + 'dB, Time = ' + x + 's')
            .css({
              top: item.pageY + 5,
              left: item.pageX + 5
            })
            .fadeIn(200)
        } else {
          $('#line-chart-tooltip').hide()
        }
      });
      $('#sdr_pica').bind('plothover', function (event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(2),
            y = item.datapoint[1].toFixed(2)

          $('#line-chart-tooltip').html('SDR = ' + y + 'dB, Time = ' + x + 's')
            .css({
              top: item.pageY + 5,
              left: item.pageX + 5
            })
            .fadeIn(200)
        } else {
          $('#line-chart-tooltip').hide()
        }
      });

      function SDRDisplay(type, data, time) {
        elementId = '#sdr_' + type
        temp_data = []
        for (var i = 0; i < data.data.length; i += 1) {
          if (data.data[i][0] <= time) {
            temp_data.push(data.data[i]);
          }
          else {
            pre_time = data.data[i - 1][0];
            next_time = data.data[i][0];
            pre_val = data.data[i - 1][1];
            next_val = data.data[i][1];
            current_val = (time - pre_time) / (next_time - pre_time) * (next_val - pre_val) + pre_val
            temp_data.push([time, current_val]);
            break;
          }
        };
        info_acc = temp_data[temp_data.length - 1][1].toFixed(1);
        info_t = temp_data[temp_data.length - 1][0].toFixed(2);
        info = "";
        if (type == 'pica') {
          info = "Accuracy: " + info_acc + "%&nbsp; / &nbsp;Service Latency: " + info_t + "s";
          $('#info_pica').html(info);
        }
        else {
          info = "Accuracy: " + info_acc + "%&nbsp; / &nbsp;Service Latency: " + info_t + "s";
          $('#info_fastica').html(info);
        };

        data.data = temp_data;
        default_data = []
        for (var i = 0; i < 13; i += 0.5) {
          default_data.push([i, 100])
        }
        var line_def = {
          data: default_data,
          color: '#000',
          lines: {
              show: false,
              fill: false,
            },
            points: {
              show: false,
            },

        };
        var my_plot_sdr = $.plot(elementId, [line_def, data], {
          grid: {
            hoverable: true,
            borderColor: '#f3f3f3',
            borderWidth: 1,
            tickColor: '#f3f3f3'
          },
          series: {
            shadowSize: 0,
            lines: {
              show: true,
              fill: true,
            },
            points: {
              show: true,
            },
          },
          yaxis: {
            show: true,
          },
          xaxis: {
            show: true,
          }
        });
        my_plot_sdr.setData([line_def, data]);
        my_plot_sdr.draw();
      };

      function computingTimeDisplay(type, t_cs, color) {
        elementId = '#tc_' + type;
        var bar_data = {
          data: [[1, t_cs[0]], [2, t_cs[1]], [3, t_cs[2]], [4, t_cs[3]], [5, t_cs[4]], [6, t_cs[5]], [7, t_cs[6]], [8, t_cs[7]], [9, t_cs[8]]],
          bars: { show: true }
        }
        var bar_data_def = {
          data: [[1, 5], [2, t_cs[1]], [3, t_cs[2]], [4, t_cs[3]], [5, t_cs[4]], [6, t_cs[5]], [7, t_cs[6]], [8, t_cs[7]], [9, t_cs[8]]],
          bars: { show: false }
        }
        var my_plot_tc = $.plot(elementId, [bar_data_def, bar_data], {
          grid: {
            borderWidth: 1,
            borderColor: '#f3f3f3',
            tickColor: '#f3f3f3'
          },
          series: {
            bars: {
              show: true, barWidth: 0.5, align: 'center',
            },
          },
          colors: ['#FFF', color],
          xaxis: {
            ticks: [[1, 'Client'], [2, 'Switch1'], [3, 'Switch2'], [4, 'Switch3'], [5, 'Switch4'], [6, 'Switch5'], [7, 'Switch6'], [8, 'Switch7'], [9, 'Server']]
          },
          yaxis: {
            show: true
          }
        });
        my_plot_tc.setData([bar_data_def, bar_data]);
        my_plot_tc.draw();
      };


      function topologyDisplay(type, paper, en_trans, en_procs, en_proceds) {
        elementId = 'topology_' + type;
        // paper.clear();
        var div_topology = document.getElementById(elementId);
        h = div_topology.offsetHeight
        w = div_topology.offsetWidth
        // alert(w+' '+h)
        unit = h / 158;
        pos_start = 0.03;
        pos_width = (1 - 0.03 - 0.023) / 8;
        paper.clear();
        for (var i = 0; i < 9; i += 1) {
          if (en_trans[i]) {
            var dot = paper.rect((pos_start + i * pos_width) * w - 30 * unit, 0.50 * h, 25 * unit, 45 * unit).attr({
              fill: "rgb(78, 158, 78)",
              stroke: "rgb(78, 158, 78)",
              "stroke-width": 1
            });
          };
          if (en_procs[i]) {
            var dot = paper.rect((pos_start + i * pos_width) * w + 5 * unit, 0.50 * h, 25 * unit, 45 * unit).attr({
              fill: "rgb(214, 76, 76)",
              stroke: "rgb(214, 76, 76)",
              "stroke-width": 1
            });
          };
          if (en_proceds[i] > 0) {
            // console.log(Math.round(en_proceds[i] * 15).toString(16));
            _factor = 1 - en_proceds[i];
            _color = "#F" + Math.round(_factor * 15).toString(16) + Math.round(_factor * 15).toString(16);
            // _color = "#F00";
            var dot = paper.rect((pos_start + i * pos_width) * w + 5 * unit, 0.50 * h, 25 * unit, 45 * unit).attr({
              fill: _color,
              stroke: _color,
              "stroke-width": 1
            });
          }
        }
      };


      function displayAll(type, data_ica, time, color, paper, t_trasfer) {
        var line_data = {
          data: data_ica.sdr,
          color: color
        };
        t_procs = data_ica.t;
        t_max = t_procs[t_procs.length - 1];
        t_cs = [0, 0, 0, 0, 0, 0, 0, 0, 0];
        en_trans = [];
        en_procs = [false, false, false, false, false, false, false, false, false];
        en_proceds = [0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (var i = 0; i < t_procs.length / 2; i++) {
          if (time >= t_procs[2 * i] && t_procs[2 * i] > 0) {
            if (time < t_procs[2 * i + 1]) {
              t_cs[i + 1] = time - t_procs[2 * i];
              en_procs[i + 1] = true;
            }
            else {
              t_cs[i + 1] = t_procs[2 * i + 1] - t_procs[2 * i];
              if (time > 0 && time < (t_procs[2 * i + 1] + 0.4)) {
                en_proceds[i + 1] = 0.5 * (t_procs[2 * i + 1] + 0.4 - time) / 0.4;
              };
            };
          };
        };
        en_trans = [true, true, true, true, true, true, true, true, true];
        if (time >= t_trasfer) {
          en_trans = [false, false, false, false, false, false, false, false, false];
        };
        if (time <= t_trasfer) {
          _value = (100 * time / t_trasfer).toFixed(1);
          $("#progress_" + type).css("width", _value + '%');
          info = _value + "% of the data was transferred";
          $("#progressinfo_" + type).html(info);
        }
        else {
          _value = 100;
          $("#progress_" + type).css("width", _value + '%');
          info = _value + "% of the data was transferred";
          $("#progressinfo_" + type).html(info);
        };
        if (time >= t_max) {
          time = t_max;
        };
        if (time === 0) {
          en_trans = [false, false, false, false, false, false, false, false, false];
        };
        SDRDisplay(type, line_data, time);
        computingTimeDisplay(type, t_cs, color);
        topologyDisplay(type, paper, en_trans, en_procs, en_proceds);
      };

      var div_topology = document.getElementById('topology_pica');
      h = div_topology.offsetHeight
      w = div_topology.offsetWidth
      var paper_pica = Raphael('topology_pica', w, h);
      var div_topology = document.getElementById('topology_fastica');
      h = div_topology.offsetHeight
      w = div_topology.offsetWidth
      var paper_fastica = Raphael('topology_fastica', w, h);

      var data_pica_xs = Array(10)
      var data_fastica_xs = Array(10)

      // dataset0
      data_pica_xs[0] = { 'sdr': [[0, 6.832417944511556], [0.10376214981079102, 6.832417944511556], [0.10434770584106445, 12.361677283971915], [0.10476374626159668, 14.443119611833344], [0.10514330863952637, 13.20438049041472], [0.10552000999450684, 15.001408065427979], [0.10668587684631348, 15.065097965809601], [0.10707640647888184, 14.177309602674118], [0.107452392578125, 15.018763338661573], [0.1078195571899414, 14.523872125852074], [0.3047151565551758, 14.523872125852074], [0.30658841133117676, 16.183387940787732], [0.30708813667297363, 17.01724495067111], [0.30753207206726074, 19.12091380292107], [0.4361884593963623, 19.12091380292107], [0.43728184700012207, 18.763272850162654], [0.43817901611328125, 18.07733788343873], [0.43898844718933105, 18.28426232866432], [0.439786434173584, 19.01160901960873], [0.6468014717102051, 19.01160901960873], [0.648566722869873, 17.048843797130598], [0.698190450668335, 17.233091665888594], [0.6997270584106445, 18.262882447959992], [1.0008461475372314, 18.262882447959992], [1.0042734146118164, 36.39656642974983], [1.0069482326507568, 46.1233945944474], [1.1062235832214355, 39.1269830173618], [1.7276136875152588, 39.1269830173618], [1.8120465278625488, 65.26819964039915], [2.006715774536133, 61.22315010705983], [2.101762533187866, 64.25120633242399], [3.305800199508667, 64.25120633242399], [3.5103907585144043, 75.40274101782725], [3.8018100261688232, 84.99658870927995], [4.097319602966309, 82.2007821212292], [6.304404258728027, 82.2007821212292], [6.801235198974609, 99.1971374472961], [7.204854965209961, 100.0]], 't': [0.10376214981079102, 0.1078195571899414, 0.3047151565551758, 0.30753207206726074, 0.4361884593963623, 0.439786434173584, 0.6468014717102051, 0.6997270584106445, 1.0008461475372314, 1.1062235832214355, 1.7276136875152588, 2.101762533187866, 3.305800199508667, 4.097319602966309, 6.304404258728027, 7.204854965209961] };
      data_fastica_xs[0] = { 'sdr': [[0, 6.835279633413795], [6.477749824523926, 6.835279633413795], [6.880354881286621, 2.434773643770019], [7.083766937255859, 16.32833724721395], [7.487713575363159, 36.56637157081322], [7.981538772583008, 63.5044854803002], [8.286031484603882, 88.63402804702376], [8.681260108947754, 99.7428036672992], [8.983247756958008, 100.0]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.477749824523926, 8.983247756958008] };
      // dataset1
      data_pica_xs[1] = { 'sdr': [[0, 7.912899631191003], [0.07143878936767578, 7.912899631191003], [0.07266950607299805, 12.078236211023034], [0.07303738594055176, 18.26439091704829], [0.2354576587677002, 18.26439091704829], [0.2361738681793213, 19.04733806064854], [0.2366490364074707, 31.184334954126342], [0.23709821701049805, 34.51006650598599], [0.42943882942199707, 34.51006650598599], [0.4307131767272949, 29.22148381073538], [0.43155646324157715, 50.793273003128405], [0.4322192668914795, 47.22227803897009], [0.43287110328674316, 51.02932317486418], [0.6331565380096436, 51.02932317486418], [0.6344265937805176, 56.06108605539759], [0.6356360912322998, 51.77012676386143], [0.6423885822296143, 49.64698329805161], [0.9410898685455322, 49.64698329805161], [0.9452273845672607, 93.28965476699382], [1.0007407665252686, 84.86145846366955], [1.0121839046478271, 86.09177439966513], [6.301228284835815, 86.09177439966513], [6.806117534637451, 100.0], [7.299384832382202, 98.29064566190618], [7.334801435470581, 98.29064566190618], [7.363766431808472, 98.29064566190618]], 't': [0.07143878936767578, 0.07303738594055176, 0.2354576587677002, 0.23709821701049805, 0.42943882942199707, 0.43287110328674316, 0.6331565380096436, 0.6423885822296143, 0.9410898685455322, 1.0121839046478271, 6.301228284835815, 7.299384832382202, 7.334801435470581, 7.334801435470581, 7.363766431808472, 7.363766431808472] };
      data_fastica_xs[1] = { 'sdr': [[0, 8.02802479730417], [6.303298234939575, 8.02802479730417], [6.607753038406372, 12.585528405021664], [7.104258298873901, 14.035183489546544], [7.4925055503845215, 17.724638249177215], [7.893462657928467, 21.729440995738326], [8.399672985076904, 24.73623799370723], [8.796016454696655, 29.810212775517137], [9.220738172531128, 33.67508590925474], [9.693999290466309, 48.432186352046934], [10.102079391479492, 87.90096299606297], [10.594165325164795, 98.76578191507895], [11.001373052597046, 100.0]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.303298234939575, 11.001373052597046] };
      // dataset2
      data_pica_xs[2] = { 'sdr': [[0, 8.4728495276739], [0.07111501693725586, 8.4728495276739], [0.07154512405395508, 15.557232373769288], [0.07200217247009277, 17.36248972798634], [0.07235240936279297, 18.761531006228044], [0.07269620895385742, 22.723816006236426], [0.07303833961486816, 18.773084172302195], [0.2272627353668213, 18.773084172302195], [0.2279987335205078, 20.205204938865812], [0.22861123085021973, 14.963875272532128], [0.4237682819366455, 14.963875272532128], [0.424670934677124, 19.172744619461955], [0.4255211353302002, 21.80710914913468], [0.426300048828125, 14.625543972305064], [0.4270656108856201, 12.84154377133985], [0.42783021926879883, 18.783309815143678], [0.42859339714050293, 21.615634638133606], [0.49504685401916504, 21.026362276183445], [0.49628615379333496, 15.975002149102238], [0.5872335433959961, 17.50170385869568], [0.5878708362579346, 20.05552746601547], [0.6872906684875488, 20.05552746601547], [0.688683032989502, 14.283054822063315], [0.6900396347045898, 29.99906054762416], [0.9237189292907715, 29.99906054762416], [0.9293835163116455, 25.15143789951782], [0.932427167892456, 35.21752171774179], [1.7145321369171143, 35.21752171774179], [1.788618803024292, 44.93030451050677], [1.8971307277679443, 54.219481302313596], [3.2869741916656494, 54.219481302313596], [3.4917309284210205, 96.49839337070789], [3.698025703430176, 98.23164212858836], [3.9007532596588135, 97.69954516166305], [6.290570497512817, 97.69954516166305], [6.594558954238892, 99.49213417382043], [6.992204666137695, 100.0]], 't': [0.07111501693725586, 0.07303833961486816, 0.2272627353668213, 0.22861123085021973, 0.4237682819366455, 0.5878708362579346, 0.6872906684875488, 0.6900396347045898, 0.9237189292907715, 0.932427167892456, 1.7145321369171143, 1.8971307277679443, 3.2869741916656494, 3.9007532596588135, 6.290570497512817, 6.992204666137695] };
      data_fastica_xs[2] = { 'sdr': [[0, 8.468742215545841], [6.301238536834717, 8.468742215545841], [6.7027037143707275, 7.166062057095546], [7.005242347717285, 12.876714530867172], [7.503114700317383, 15.819675106425315], [7.946654796600342, 19.586643412292496], [8.39847731590271, 29.936954741440047], [8.79908013343811, 52.901749253725015], [9.300171375274658, 60.27622766980324], [9.698725700378418, 63.77243489532448], [10.100524425506592, 71.81934986013445], [10.600825071334839, 88.17576030557674], [11.001494884490967, 96.22954207161419], [11.39561653137207, 99.81325151247033], [11.894976139068604, 100.0]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.301238536834717, 11.894976139068604] };
      // dataset3
      data_pica_xs[3] = { 'sdr': [[0, 9.738553463936467], [0.07074284553527832, 9.738553463936467], [0.07128500938415527, 15.530994721168605], [0.07175922393798828, 39.634637188230684], [0.0721273422241211, 28.505194889400354], [0.07248926162719727, 43.999867197429225], [0.07284855842590332, 29.770882996278143], [0.23057126998901367, 29.770882996278143], [0.2312321662902832, 28.207356652577705], [0.23183870315551758, 17.279168835561602], [0.4295670986175537, 17.279168835561602], [0.4306178092956543, 33.01229305820733], [0.43244099617004395, 23.700787643185475], [0.4331982135772705, 31.055239690159354], [0.4360537528991699, 25.252935358483132], [0.6307971477508545, 25.252935358483132], [0.632793664932251, 28.647876465117307], [0.634270191192627, 35.49652242763558], [0.6955761909484863, 35.043532068993315], [0.9282724857330322, 35.043532068993315], [0.9357442855834961, 49.940335484986974], [0.9995512962341309, 64.62511544813458], [1.0932633876800537, 66.48960496044961], [1.0962550640106201, 68.49527370252623], [1.7146587371826172, 68.49527370252623], [1.723951816558838, 45.80744399165394], [1.895735263824463, 42.7000833540956], [1.9068951606750488, 34.16486520160307], [2.104060649871826, 30.629514414129588], [2.293097972869873, 29.473399747482503], [3.2933528423309326, 29.473399747482503], [3.4070065021514893, 40.7383691427624], [3.7920567989349365, 43.10275697634288], [4.001669645309448, 45.076061470250735], [6.2919840812683105, 45.076061470250735], [6.697157144546509, 80.48292786509998], [7.193118572235107, 69.63643280221386], [7.594100713729858, 100.0], [7.997952938079834, 82.03572961119949], [8.393318176269531, 92.891484333967], [8.903499126434326, 86.60605921536619], [9.300199270248413, 90.13220844383336], [9.696937322616577, 88.12580666805073]], 't': [0.07074284553527832, 0.07284855842590332, 0.23057126998901367, 0.23183870315551758, 0.4295670986175537, 0.4360537528991699, 0.6307971477508545, 0.6955761909484863, 0.9282724857330322, 1.0962550640106201, 1.7146587371826172, 2.293097972869873, 3.2933528423309326, 4.001669645309448, 6.2919840812683105, 9.696937322616577] };
      data_fastica_xs[3] = { 'sdr': [[0, 10.912829853310893], [6.30759859085083, 10.912829853310893], [6.704237699508667, -1.9070833649690528], [7.007100820541382, 20.256185142101], [7.405133008956909, 38.55744173299516], [7.805903673171997, 56.57525291450555], [8.20911693572998, 58.87081006394408], [8.703385353088379, 74.75354265547138], [9.113467454910278, 84.9398789248823], [9.702963590621948, 96.99262386372315], [10.103427410125732, 98.35712076608029], [10.50955057144165, 100.0]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.30759859085083, 10.50955057144165] };
      // dataset4
      data_pica_xs[4] = { 'sdr': [[0, 8.818526659731285], [0.07076668739318848, 8.818526659731285], [0.07119488716125488, 15.168954781214167], [0.07159662246704102, 22.77792727945086], [0.07196736335754395, 16.808767155009143], [0.07232999801635742, 27.01970397242785], [0.07269644737243652, 17.15052156245288], [0.07305765151977539, 19.41061330402087], [0.07341790199279785, 15.687529010492904], [0.07377839088439941, 17.898548246656215], [0.07413864135742188, 18.78072383321442], [0.07450032234191895, 22.07652187117095], [0.09603071212768555, 17.075187512420417], [0.09865784645080566, 25.90462652076034], [0.09900712966918945, 15.013045778685411], [0.22908425331115723, 15.013045778685411], [0.2296607494354248, 17.54149202183876], [0.2301805019378662, 30.580500782368414], [0.3589503765106201, 30.580500782368414], [0.3598191738128662, 31.162541560112324], [0.3605818748474121, 27.983290089495185], [0.3630688190460205, 31.004980465395942], [0.3648862838745117, 27.713858728305325], [0.36569738388061523, 30.757749677502876], [0.3663759231567383, 27.50666586473191], [0.367046594619751, 30.532332416090256], [0.36771154403686523, 27.364304850191584], [0.40889477729797363, 30.361535561712678], [0.40960073471069336, 27.244063201344076], [0.4102766513824463, 30.163440473578508], [0.41094446182250977, 27.13835136202713], [0.41161155700683594, 29.966988031238103], [0.5060238838195801, 27.044245922325143], [0.6389725208282471, 27.044245922325143], [0.6407797336578369, 29.608078864950464], [0.6496942043304443, 32.4321725355562], [0.6946907043457031, 31.321432921193924], [0.9298715591430664, 31.321432921193924], [0.9322199821472168, 40.951175897374064], [0.9382727146148682, 49.653696956581825], [1.0955991744995117, 59.988202876417226], [1.7134885787963867, 59.988202876417226], [1.7975244522094727, 38.14015511087009], [1.9016532897949219, 73.32195270592513], [2.0067636966705322, 45.56293575373428], [2.1992878913879395, 74.99762762246895], [2.2066750526428223, 50.60173286872494], [3.2946364879608154, 50.60173286872494], [3.4947147369384766, 100.0], [3.5163052082061768, 93.24321600975343], [3.9061312675476074, 97.81875237383377], [6.301698684692383, 97.81875237383377], [6.699531078338623, 85.18039548139578], [7.112138748168945, 84.53301118407848]], 't': [0.07076668739318848, 0.09900712966918945, 0.22908425331115723, 0.2301805019378662, 0.3589503765106201, 0.5060238838195801, 0.6389725208282471, 0.6946907043457031, 0.9298715591430664, 1.0955991744995117, 1.7134885787963867, 2.2066750526428223, 3.2946364879608154, 3.9061312675476074, 6.301698684692383, 7.112138748168945] };
      data_fastica_xs[4] = { 'sdr': [[0, 10.330282448811975], [6.2853264808654785, 10.330282448811975], [6.686392068862915, 2.2431072003559214], [6.929272174835205, 20.598680191374886], [7.38349986076355, 44.083001955933746], [7.797645568847656, 50.35098888053049], [8.382594108581543, 73.70839944242884], [8.69293737411499, 97.06520474395971], [9.096422910690308, 100.0], [9.508289575576782, 98.76614868677373]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.2853264808654785, 9.508289575576782] };
      // dataset5
      data_pica_xs[5] = { 'sdr': [[0, 7.259158684953242], [0.07154440879821777, 7.259158684953242], [0.07210803031921387, 13.252482236324436], [0.07339024543762207, 15.72605688612277], [0.07390666007995605, 30.53879544613442], [0.07431316375732422, 38.55653380503246], [0.07480740547180176, 46.237994136804105], [0.07513785362243652, 52.23689136443587], [0.22756314277648926, 52.23689136443587], [0.22813677787780762, 71.22618968532632], [0.2286512851715088, 64.90395723134664], [0.22911834716796875, 63.63532580255453], [3.1998414993286133, 63.63532580255453], [3.40293550491333, 82.54539937676743], [3.6947598457336426, 100.0], [3.8966012001037598, 94.10939677052767], [6.20204496383667, 94.10939677052767], [6.6900794506073, 79.18960304772209], [7.113661289215088, 72.46453994981805], [7.597755670547485, 69.87850870016653], [7.6328723430633545, 69.87850870016653], [7.6633501052856445, 69.87850870016653], [7.695304870605469, 69.87850870016653], [7.719137907028198, 69.87850870016653]], 't': [0.07154440879821777, 0.07513785362243652, 0.22756314277648926, 0.22911834716796875, 3.1998414993286133, 3.8966012001037598, 6.20204496383667, 7.597755670547485, 7.6328723430633545, 7.6328723430633545, 7.6633501052856445, 7.6633501052856445, 7.695304870605469, 7.695304870605469, 7.719137907028198, 7.719137907028198] };
      data_fastica_xs[5] = { 'sdr': [[0, 7.701467481894597], [6.235353946685791, 7.701467481894597], [6.693411827087402, 12.648811718355917], [7.003700017929077, 14.657955274596915], [7.509481906890869, 17.291570009321422], [7.901749849319458, 20.747677415918], [8.39792275428772, 21.82508953102598], [8.800559282302856, 26.632767754828357], [9.295154094696045, 34.52394017119408], [9.696431398391724, 42.134318629350865], [10.096159219741821, 47.701424310147026], [10.40372371673584, 54.5248332113169], [10.898547887802124, 64.73736449689993], [11.392796039581299, 80.15066113112482], [11.792734622955322, 100.0], [12.203518390655518, 88.11751067319716], [12.798545837402344, 79.70111790427234], [13.197818756103516, 75.68571589292338], [13.693052053451538, 73.77734965391606]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.235353946685791, 13.693052053451538] };
      // dataset6
      data_pica_xs[6] = { 'sdr': [[0, 8.444687444977104], [0.07114529609680176, 8.444687444977104], [0.07155990600585938, 15.944066709335319], [0.07195210456848145, 14.732181613350646], [0.07238292694091797, 14.298748762465102], [0.07390046119689941, 13.971850820812334], [0.07425427436828613, 15.415441552870062], [0.07458877563476562, 15.024549791164905], [0.2411031723022461, 15.024549791164905], [0.24340319633483887, 27.547664014566408], [0.2440204620361328, 17.84970391494355], [0.2520167827606201, 27.988311011628447], [0.25340890884399414, 21.10054610750409], [0.43346142768859863, 21.10054610750409], [0.4342968463897705, 28.44363922999655], [0.43506765365600586, 50.50247266005532], [0.4382350444793701, 56.61805283279707], [0.6494178771972656, 56.61805283279707], [0.6508336067199707, 54.690458480009795], [0.6521928310394287, 46.497752286802175], [0.7137508392333984, 44.066279427714115], [0.714989423751831, 46.01310373632005], [0.9358317852020264, 46.01310373632005], [0.9417266845703125, 59.021944597210144], [0.9449462890625, 54.001689232532804], [1.0113554000854492, 48.84107440796598], [1.7203426361083984, 48.84107440796598], [1.8023762702941895, 61.09208886668451], [1.9050750732421875, 70.1230059446569], [1.913680076599121, 73.66394898514434], [2.1115882396698, 74.4402618958705], [6.304441452026367, 74.4402618958705], [6.704893350601196, 99.93310305952215], [7.025607585906982, 100.0], [7.400259017944336, 99.69129494921181], [7.4328389167785645, 99.69129494921181]], 't': [0.07114529609680176, 0.07458877563476562, 0.2411031723022461, 0.25340890884399414, 0.43346142768859863, 0.4382350444793701, 0.6494178771972656, 0.714989423751831, 0.9358317852020264, 1.0113554000854492, 1.7203426361083984, 2.1115882396698, 6.304441452026367, 7.400259017944336, 7.4328389167785645, 7.4328389167785645] };
      data_fastica_xs[6] = { 'sdr': [[0, 8.477989779814752], [6.305560827255249, 8.477989779814752], [6.702341318130493, 11.802382293715244], [7.097497224807739, 12.865267522746157], [7.509255409240723, 15.23453610256551], [8.001714944839478, 20.26350419227404], [8.403777599334717, 25.986762945650494], [8.801605701446533, 41.029111507680376], [9.298475503921509, 48.854212125054595], [9.608969688415527, 64.21998529491931], [10.214229822158813, 78.9987795166469], [10.600875854492188, 95.05396995958225], [11.007303714752197, 99.8720850245055], [11.4124276638031, 100.0]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.305560827255249, 11.4124276638031] };
      // dataset7
      data_pica_xs[7] = { 'sdr': [[0, 8.784538863647887], [0.07025718688964844, 8.784538863647887], [0.07115316390991211, 14.451637186280102], [0.0718073844909668, 18.642856424107794], [0.07344698905944824, 15.4612845907447], [0.09443855285644531, 16.140974918936784], [0.23363184928894043, 16.140974918936784], [0.23424649238586426, 31.41793881381586], [0.2348008155822754, 16.229193323816215], [0.23530817031860352, 22.094014244600626], [0.23581242561340332, 15.464000650828913], [0.4310288429260254, 15.464000650828913], [0.4319279193878174, 23.4312830690169], [0.43267273902893066, 49.05735068233643], [0.43685340881347656, 50.39234509503231], [0.6318931579589844, 50.39234509503231], [0.6353774070739746, 34.96946767444694], [0.6367945671081543, 26.818998978217973], [0.9301750659942627, 26.818998978217973], [0.9325730800628662, 23.510271759067326], [0.9371893405914307, 25.56650653425535], [1.0063786506652832, 24.828740800039984], [1.1012680530548096, 49.123363065180584], [1.1958544254302979, 22.178905776300205], [1.717951774597168, 22.178905776300205], [1.7317581176757812, 53.8625042805576], [1.9054577350616455, 21.45792255663979], [2.0065481662750244, 28.25061284620619], [3.2947142124176025, 28.25061284620619], [3.411620616912842, 26.63446596273964], [3.704791784286499, 70.97186244405732], [3.906049966812134, 50.36440052080282], [4.196326971054077, 94.05123221159354], [6.295022249221802, 94.05123221159354], [6.700096607208252, 98.72281571815763], [7.095468997955322, 100.0]], 't': [0.07025718688964844, 0.09443855285644531, 0.23363184928894043, 0.23581242561340332, 0.4310288429260254, 0.43685340881347656, 0.6318931579589844, 0.6367945671081543, 0.9301750659942627, 1.1958544254302979, 1.717951774597168, 2.0065481662750244, 3.2947142124176025, 4.196326971054077, 6.295022249221802, 7.095468997955322] };
      data_fastica_xs[7] = { 'sdr': [[0, 8.22801893997692], [6.289959192276001, 8.22801893997692], [6.590324640274048, 6.902085348470926], [6.904219388961792, 16.942714598202176], [7.2979772090911865, 14.283095406941177], [7.690959215164185, 15.712404630120885], [8.189809560775757, 31.0747432897586], [8.597270488739014, 67.08908081800632], [9.187184810638428, 100.0], [9.594629287719727, 93.8740485952103], [10.19008469581604, 93.30877824248363]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.289959192276001, 10.19008469581604] };
      // dataset8
      data_pica_xs[8] = { 'sdr': [[0, 7.819199944453442], [0.07090449333190918, 7.819199944453442], [0.07142114639282227, 14.891682622920301], [0.07183504104614258, 20.3085017276699], [0.07220220565795898, 20.162772052461207], [0.07256317138671875, 22.85225389242544], [0.07292294502258301, 18.045421471776603], [0.07328057289123535, 17.57029733038992], [0.073638916015625, 18.860395659975538], [0.21911239624023438, 18.860395659975538], [0.2196643352508545, 20.07858173080618], [0.22136926651000977, 18.16495235553058], [0.22193217277526855, 23.388854607414498], [0.4180006980895996, 23.388854607414498], [0.41887688636779785, 19.544079112984665], [0.41964030265808105, 16.22363249223135], [0.42038488388061523, 18.065744544948735], [0.6253600120544434, 18.065744544948735], [0.6264770030975342, 16.67695972577484], [0.6306159496307373, 18.850231158194394], [0.6342511177062988, 24.44946397090602], [0.9238781929016113, 24.44946397090602], [0.9316387176513672, 37.67492552909173], [0.9850804805755615, 32.54996088464661], [0.9954943656921387, 31.90708118618697], [1.715710163116455, 31.90708118618697], [1.784858226776123, 34.95258461025374], [1.89149808883667, 33.335564058914414], [1.988553524017334, 33.23691530358958], [3.302978277206421, 33.23691530358958], [3.4933278560638428, 37.30164186994126], [3.600404739379883, 42.41692528914449], [3.894911289215088, 47.49502031342999], [4.183636665344238, 52.05052148524213], [4.201543807983398, 55.623907783041496], [4.495835065841675, 58.38248085902884], [4.786443710327148, 60.42423803203222], [4.99519944190979, 61.85462945076189], [6.286044120788574, 61.85462945076189], [6.815310478210449, 81.1825081993828], [7.1881043910980225, 93.88231707439881], [7.688081741333008, 98.18501960671078], [7.991371154785156, 100.0]], 't': [0.07090449333190918, 0.073638916015625, 0.21911239624023438, 0.22193217277526855, 0.4180006980895996, 0.42038488388061523, 0.6253600120544434, 0.6342511177062988, 0.9238781929016113, 0.9954943656921387, 1.715710163116455, 1.988553524017334, 3.302978277206421, 4.99519944190979, 6.286044120788574, 7.991371154785156] };
      data_fastica_xs[8] = { 'sdr': [[0, 7.874832420291651], [6.400885343551636, 7.874832420291651], [6.703665733337402, 4.660638735961608], [7.123093128204346, 15.467578352808975], [7.620347261428833, 22.896926364386697], [8.020822048187256, 25.65638702220528], [8.523447036743164, 33.24118067095409], [8.911872863769531, 51.17511057900743], [9.397068738937378, 76.75011154371226], [9.79904818534851, 88.9656198592494], [10.199862957000732, 97.4528450808153], [10.515121698379517, 100.0]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.400885343551636, 10.515121698379517] };
      // dataset9
      data_pica_xs[9] = { 'sdr': [[0, 7.567415617054703], [0.07088232040405273, 7.567415617054703], [0.07146501541137695, 10.211114350885042], [0.0721123218536377, 11.526415246050655], [0.07248902320861816, 14.251533078511509], [0.07285165786743164, 14.726170307870778], [0.07321286201477051, 16.143727242641038], [0.07356834411621094, 17.996724644768385], [0.07392644882202148, 19.019951615484924], [0.07428240776062012, 16.18236145538153], [0.21230292320251465, 16.18236145538153], [0.2128767967224121, 18.496502318134052], [0.21338820457458496, 18.25223832188723], [0.2138524055480957, 19.404811939210518], [0.409045934677124, 19.404811939210518], [0.4103226661682129, 23.231421887482888], [0.41111063957214355, 29.53793138748547], [0.4118540287017822, 24.496591641602688], [0.6137096881866455, 24.496591641602688], [0.6149520874023438, 42.01791651007072], [0.6161389350891113, 53.2079930121118], [0.6172914505004883, 52.69342919512303], [0.9184529781341553, 52.69342919512303], [0.9207949638366699, 67.76798143386348], [0.9809603691101074, 71.99183528506514], [0.9880146980285645, 72.85172695672017], [6.184971332550049, 72.85172695672017], [6.583526611328125, 87.75730781036849], [7.074458837509155, 100.0], [7.520508289337158, 96.94580828605194], [7.554336786270142, 96.94580828605194], [7.576263427734375, 96.94580828605194]], 't': [0.07088232040405273, 0.07428240776062012, 0.21230292320251465, 0.2138524055480957, 0.409045934677124, 0.4118540287017822, 0.6137096881866455, 0.6172914505004883, 0.9184529781341553, 0.9880146980285645, 6.184971332550049, 7.520508289337158, 7.554336786270142, 7.554336786270142, 7.576263427734375, 7.576263427734375] };
      data_fastica_xs[9] = { 'sdr': [[0, 7.736985175681639], [6.25884747505188, 7.736985175681639], [6.559495449066162, 4.899398516910173], [6.957091808319092, 18.032183543839547], [7.487003803253174, 23.969884646173423], [7.862538814544678, 30.434673079884593], [8.357258319854736, 45.988195402683694], [8.75862431526184, 68.73881165152235], [9.159419059753418, 94.0025385363567], [9.59190320968628, 99.75055579378763], [9.959696054458618, 100.0], [10.361127853393555, 99.6266882533694]], 't': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6.25884747505188, 10.361127853393555] };


      var id = 2;
      displayAll('pica', data_pica_xs[id], 0, '#0077BB', paper_pica, 6.3);
      displayAll('fastica', data_fastica_xs[id], 0, '#CCBB44', paper_fastica, 6.3);

      var current_time = 0;
      var en_running = 'off';

      function update(data_pica_xs, data_fastica_xs, paper_pica, paper_fastica) {
        displayAll('pica', data_pica_xs, current_time, '#0077BB', paper_pica, 6.3);
        displayAll('fastica', data_fastica_xs, current_time, '#CCBB44', paper_fastica, 6.3);
        if (en_running === 'on') {
          current_time += 0.025;
          setTimeout(update, 100, data_pica_xs, data_fastica_xs, paper_pica, paper_fastica);
        }
      };

      $('#btn-start').click(function () {
        if (en_running === 'on') {
          en_running = 'off';
          $('#btn-start').html("Run");
        }
        else {
          en_running = 'on';
          $('#btn-start').html("Pause");
          update(data_pica_xs[id], data_fastica_xs[id], paper_pica, paper_fastica);
        }
      });

      $('#btn-reload').click(function () {
        en_running = 'off';
        $('#btn-start').html("Run");
        current_time = 0;
        update(data_pica_xs[id], data_fastica_xs[id], paper_pica, paper_fastica);
      });


    })

    /*
     * Custom Label formatter
     * ----------------------
     */
    function labelFormatter(label, series) {
      return '<div style="font-size:13px; text-align:center; padding:2px; color: #fff; font-weight: 600;">'
        + label
        + '<br>'
        + Math.round(series.percent) + '%</div>'
    }

  </script>
</body>

</html>